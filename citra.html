<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TVMalaysia Player</title>
  <script src="https://content.jwplatform.com/libraries/Z79JsmAO.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: #000;
      overflow: hidden;
    }

    #jwplayerDiv {
      width: 100vw;
      height: 100vh;
    }

    .watermark {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 9999;
      background: #D50000;
      color: white;
      padding: 6px 12px;
      font-size: 14px;
      font-weight: bold;
      border-radius: 4px;
      font-family: sans-serif;
      animation: pulse 2.5s infinite ease-in-out;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    .watermark:hover {
      background: #FF1744;
    }
  </style>
</head>
<body>
  <!-- Watermark -->
  <div class="watermark">TVMalaysia.live</div>

  <!-- JW Player Container -->
  <div id="jwplayerDiv"></div>

  <script>
    const npointUrl = "https://api.npoint.io/bac9b067177c3c5de4c6";

    fetch(npointUrl + "?t=" + Date.now())
      .then(res => res.json())
      .then(data => {
        const player = jwplayer("jwplayerDiv").setup({
          file: data.file,
          type: "dash",
          autostart: true,
          mute: false,
          width: "100%",
          height: "100%",
          stretching: "uniform",
          drm: {
            clearkey: {
              key: "654f2d25a5bfb27c9e5ae0852584a166",
              keyId: "84bf9ad6848be7db20f9d16823deef10"
            }
          }
        });

        // Optional: fallback kalau browser paksa mute
        player.on("play", function () {
          if (player.getMute()) {
            player.setMute(false);
          }
        });
      })
      .catch(err => {
        alert("Gagal load link dari nPoint: " + err);
      });
  </script>
</body>
</html>